name: Keep-Alive
on:
  schedule:
    - cron: '*/5 * * * *' # Run every 5 minutes
  workflow_dispatch: # Allow manual triggering

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Health Endpoint
        # Retry up to 3 times with 5-second delay.
        # "|| echo" ensures the workflow implies success even if the ping fails, preventing email spam.
        run: |
          curl -f -v --retry 3 --retry-delay 5 https://eyoris-api.onrender.com/health || echo "Ping failed but workflow ignored error"
